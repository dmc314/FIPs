---
fip: "0036"
title: Introducing a Sector Duration Multiple for Longer Term Sector Commitment 
status: Draft
type: Technical
author: Axel C (@AxCortesCubero), jbenet (@jbenet), Maria S (@misilva73), Molly M. (@momack2), Tom M. (@tmellan), Vik K. (@vkalghatgi), ZX @zixuanzh)
discussions-to: https://github.com/filecoin-project/FIPs/discussions/386
created: 2022-06-22
---

## Simple Summary
- Add a Sector Duration Multiplier for all sectors (including both Committed Capacity sectors and sectors containing storage deals).
- A longer sector will have a higher Quality Adjusted Power than a shorter sector, all things equal.
- Duration Multiplier would be on top of (multiplicative) existing Quality Multiplier incentives (eg. Filecoin+ incentives).
- Sectors with higher Quality Adjusted Power as a result of Duration Multiplier and Quality Multiplier will require higher initial pledge collateral.
- Increase minimum sector duration time to 1 year and maximum sector duration to 5 years.
- This same policy will apply at Sector Upgrade and Extension.

## Problem Motivation
Currently, storage providers do not receive any additional compensation or incentive for committing longer term sectors (whether that be CC or storage deals) to the network. The protocol places equal value on 180 to 540 day sectors in terms of storage mining rewards. However, in making an upfront commitment to longer term sectors, storage providers take on additional operational risks (more can go wrong in a longer time period), and lock rewards for longer. Furthermore, in committing longer term sectors/deals, storage providers demonstrate their long-term commitment to the mission and growth of the Filecoin Network, and are more aligned with client preference for persistent storage. Therefore, the added value of longer-term sector commitments, coupled with the compounded operational/liquidity risks storage providers incur for longer term sectors should be compensated for in the form of increased rewards. 

The motivation to increase the minimum and maximum sector durations is aimed to decrease sector turnover and improve stability. The new maximum limit of 5 years gives SPs the option to express a long-term commitment to the network which was previously not possible with the maximum sector duration length of 540 days.From a macroeconomic perspective, incentives to seal for longer durations affect the circulating supply dynamics of the network, since collateral is locked for longer. As the network exists in its current state, the percentage of FIL locked on the network is more likely to decline. This FIP looks to introduce more favorable percentage locked value dynamics, while simulatenously ensuring that this increase in locking contributes to network utility, stable circulating supply dynamics, and SP profitability and optionality. 

Per the econonomic preference to increase the percentage value locked, we are also considering adjusting the [Initial Consensus Pledge Target Multiplier](https://spec.filecoin.io/systems/filecoin_mining/miner_collaterals/). Note, this is **not** part of this existing FIP proposed, but, is included in the analysis brief prepared by CEL analazying and modeling the impacts of this FIP proposal. The intention is to create long-term aligned total value locked (TVL) dynamics to support stable and proedictable conditions for SP returns. We further discuss the problem/change motivation, and explore impacts on SP profitability and network macroeconomics [here](https://pl-strflt.notion.site/Duration-Changes-FIP-discussion-Analysis-Summary-735ce6685b7946f0a03fc13c3fe271fa).  

## Specification
**Current Protocol Configuration**: 

The current sector quality multiplier follows from the spec [here](https://github.com/filecoin-project/specs/blob/ad8af4cd3d56890504cbfd23e5766a279cbfa014/content/systems/filecoin_mining/sector/sector-quality/_index.md). The notion of Sector Quality distinguishes between sectors with heuristics indicating the presence of valuable data.

Sector Quality Adjusted Power is a weighted average of the quality of its space and it is based on the size, duration and quality of its deals.

 Name                                | Description                                           |
| ----------------------------------- | ----------------------------------------------------- |
| QualityBaseMultiplier (QBM)         | Multiplier for power for storage without deals.       |
| DealWeightMultiplier (DWM)          | Multiplier for power for storage with deals.          |
| VerifiedDealWeightMultiplier (VDWM) | Multiplier for power for storage with verified deals. |

The formula for calculating Sector Quality Adjusted Power (or QAP, often referred to as power) makes use of the following factors:

- `dealSpaceTime`: sum of the `duration*size` of each deal
- `verifiedSpaceTime`: sum of the `duration*size` of each verified deal
- `baseSpaceTime` (spacetime without deals): `sectorSize*sectorDuration - dealSpaceTime - verifiedSpaceTime`

Based on these the average quality of a sector is:

$$avgQuality = \frac{baseSpaceTime*QBM + dealSpaceTime*DWM + verifiedSpaceTime*VDWM}{sectorSize*sectorDuration*QBM}$$

The _Sector Quality Adjusted Power_ is:

$sectorQuality = avgQuality*sectorSize$

**Proposed Protocol Change**: 
Introduce a multiplier based on sector duration
 Name                                | Description                                           |
| ----------------------------------- | ----------------------------------------------------- |
| QualityBaseMultiplier (QBM)         | Multiplier for power for storage without deals.       |
| DealWeightMultiplier (DWM)          | Multiplier for power for storage with deals.          |
| VerifiedDealWeightMultiplier (VDWM) | Multiplier for power for storage with verified deals. |
| **SectorDurationMultiplier (SDM)** | **Multiplier for power for storage based on promised sector duration** |

**This SectorDurationMultiplier function proposed is linear with slope 2**. See below for the function proposed. 
![alt text](https://lh3.googleusercontent.com/IB_Xn5JBcFPQvc_eu-bwcnA3pDdY6mcRER68ThWkI2cGxK3K3c1wyjVF6zf7tQbQn-HqGGn8u7Ct2jX_wp1gzv0TxLuvGqN4gMV21-q4wU2cygemqrVEhTAneVwtPoePgZjK9X_dT3L26Ycsabk)

The rationale to select this linear slope 2 function is based on a principle that the selected parameters should maximize the effectiveness of the duration incentive, subject to SPâ€™s collateral availability constraints, while taking into account micro and macroeconomic consequences with minimal added implementation complexity. Further analysis/simulation is shown in the analysis brief CEL prepared linked above. 

Therefore, the new suggested *Sector Quality Adjusted Power* is: 

$sectorQuality = (avgQuality*sectorSize)*SDM$

## Design Rationale
The rationale for the specification is to achieve the goals and desired behavior with minimal code changes. Introducing a duration multiplier should flow into collateral requirements,  consensus power etc with minimal change. 

## Backwards Compatibility
This policy would apply at Sector Extension and Upgrade for existing sectors. 

## Test Cases
N/A

## Security Considerations
There is a potential added risk to introducing a strong economic preference for longer term sectors. Sectors that are locked for extended periods of time may be able to exploit emergent security vulnerabilities and expire off the network much later once these vulnerabilities are addressed. Given this, if accepted, this FIP should be followed up by a discussion on what policy the network should take in the event a bug is found in PoRep theory or implementation, understanding that it may not be necessary to implement code embodying the agreed policy until necessitated by discovery of an insecurity. A FIP-level ratification of the policy, but without requiring code, provides a good balance between community consensus and future adaptability.

## Incentive Considerations
As discussed in the problem motivation section, this FIP introduces incentives to further align the cryptoeconomic schema of the Filecoin Network with intended goals of the network to provide useful and reliable storage. We introduce the idea that longer term sectors represent a long-term investment and commitment to the Filecoin ecosystem, and therefore should be rewarded proportionally with greater block reward shares.

Note, we also introduce the possibility for storage providers to receive additional multipliers from committing CC for longer. Even this has added value insofar as it represents a commitment to the ecosystem long term that should be rewarded. 

## Implementation
TBD 
